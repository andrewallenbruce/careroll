---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse  = FALSE,
  echo      = TRUE,
  message   = FALSE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "#>",
  dpi       = 300, 
  out.width = "100%",
  fig.path  = "man/figures/README-"
)
```

# {careroll}

<!-- badges: start -->
<!-- badges: end -->


## Installation

You can install the development version of careroll from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("andrewallenbruce/careroll", build_vignettes = TRUE)
```

``` r
# install.packages("remotes")
remotes::install_github("andrewallenbruce/careroll", build_vignettes = TRUE)
```

```{r echo=TRUE}
library(careroll)
```

## Year

### National

```{r}
# Total Medicare Beneficiaries
yr_nat_tot <- levels(period = "year", level = "national", group = "total") |> 
  dplyr::select(!c(bene_orig, bene_ma_oth)) |> 
  dplyr::mutate(chg_abs_tot = bene_tot - dplyr::lag(bene_tot, order_by = year),
                chg_rel_tot = round(chg_abs_tot / dplyr::lag(bene_tot, order_by = year) * 100, digits = 2),
                roll_mean = slider::slide_mean(bene_tot, before = 1)) |> 
  dplyr::relocate(c("roll_mean", "chg_abs_tot", "chg_rel_tot"), .after = bene_tot)

yr_nat_tot
```

```{r}
levels(period = "year", level = "national", group = "total") |> 
  dplyr::mutate(pct_orig = round((bene_orig / bene_tot) * 100, digits = 2),
                pct_ma = round((bene_ma_oth / bene_tot) * 100, digits = 2)) |> 
  dplyr::mutate(chg_abs_orig = bene_orig - dplyr::lag(bene_orig, order_by = year),
                chg_rel_orig = round(chg_abs_orig / dplyr::lag(bene_orig, order_by = year) * 100, digits = 2)) |> 
  dplyr::relocate(c("chg_abs_orig", "chg_rel_orig"), .after = bene_orig) |> 
  dplyr::mutate(chg_abs_ma = bene_ma_oth - dplyr::lag(bene_ma_oth, order_by = year),
                chg_rel_ma = round(chg_abs_ma / dplyr::lag(bene_ma_oth, order_by = year) * 100, digits = 2)) |> 
  dplyr::relocate(c("chg_abs_ma", "chg_rel_ma"), .after = bene_ma_oth) |> 
  dplyr::select(-bene_tot) |> 
  dplyr::select(year, bene_orig, bene_ma_oth, dplyr::starts_with("pct"), dplyr::starts_with("chg_abs"), dplyr::starts_with("chg_rel"))
```



```{r}
# Aged Beneficiaries
levels(period = "year", level = "national", group = "aged")
```

```{r}
# Disabled Beneficiaries
levels(period = "year", level = "national", group = "disabled")
```


```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "year", level = "national", group = "partAB")
```


```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "year", level = "national", group = "partD")
```


<br>

### State

```{r}
# Medicare Beneficiaries
levels(period = "year", level = "state", group = "total") |> 
  dplyr::arrange(state, year, dplyr::desc(bene_tot)) |> 
  print(n = 50)
```

```{r}
# Aged Beneficiaries
levels(period = "year", level = "state", group = "aged")
```

```{r}
# Disabled Beneficiaries
levels(period = "year", level = "state", group = "disabled")
```

```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "year", level = "state", group = "partAB")
```

```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "year", level = "state", group = "partD")
```


<br>

### County

```{r}
# Medicare Beneficiaries
levels(period = "year", level = "county", group = "total")
```


```{r}
# Aged Beneficiaries
levels(period = "year", level = "county", group = "aged")
```

```{r}
# Disabled Beneficiaries
levels(period = "year", level = "county", group = "disabled")
```

```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "year", level = "county", group = "partAB")
```


```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "year", level = "county", group = "partD")
```


## Month

### National

```{r}
# Medicare Beneficiaries
levels(period = "month", level = "national", group = "total")
```


```{r}
# Aged Beneficiaries
levels(period = "month", level = "national", group = "aged")
```


```{r}
# Disabled Beneficiaries
levels(period = "month", level = "national", group = "disabled")
```


```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "month", level = "national", group = "partAB")
```


```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "month", level = "national", group = "partD")
```

### State

```{r}
# Medicare Beneficiaries
levels(period = "month", level = "state", group = "total")
```


```{r}
# Aged Beneficiaries
levels(period = "month", level = "state", group = "aged")
```


```{r}
# Disabled Beneficiaries
levels(period = "month", level = "state", group = "disabled")
```


```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "month", level = "state", group = "partAB")
```


```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "month", level = "state", group = "partD")
```

### County


```{r}
# Medicare Beneficiaries
levels(period = "month", level = "county", group = "total")
```


```{r}
# Aged Beneficiaries
levels(period = "month", level = "county", group = "aged")
```


```{r}
# Disabled Beneficiaries
levels(period = "month", level = "county", group = "disabled")
```


```{r}
# Beneficiaries with Hospital (Part A) and Supplementary (Part B)
levels(period = "month", level = "county", group = "partAB")
```


```{r}
# Prescription Drug (Part D) Beneficiaries
levels(period = "month", level = "county", group = "partD")
```
